
Picoblaze Assembler based on kpicosim  Version 1.0
Source File: /home/semai/Work/REPO_HOME/asylum/OpenBlaze8/tools/../sim/testbench-asm/test_035_test.psm

Line  Addr Instr  Source Code
   1              ; ;------------------------------------
   2              ; ; Test 035
   3              ; ; Instruction Test with register
   4              ; ;------------------------------------
   5              
   6              ; ;------------------------------------
   7              ; ; directive compilation fichier
   8              ; ;------------------------------------
   9              
  10              VHDL      "../ROM_blank_adh.vhd", "../../OpenBlaze8_ROM.vhd", "OpenBlaze8_ROM"
  11              
  12              ; ;------------------------------------
  13              ; ; Constantes
  14              ; ;------------------------------------
  15              sp                  EQU       sF
  16              
  17              test_val_ok         EQU       $FA
  18              test_val_ko         EQU       $ED
  19              
  20              ; ;------------------------------------
  21              ; ; directives pour le simulateur:  definition des  E/S
  22              ; ;------------------------------------
  23              switch_id           EQU       $00
  24              led_id              EQU       $20
  25              debug_id            EQU       $e0
  26              
  27              switch              DSIN      switch_id
  28              led                 DSOUT     led_id
  29              debug               DSOUT     debug_id
  30              
  31              ; ;------------------------------------
  32              ; ; MAIN
  33              ; ;------------------------------------
  34                                  ORG       $000
  35              main: 
  36  000  0005a                      LOAD      s0, $5A
  37  001  0010f                      LOAD      s1, $0F
  38  002  0021f                      LOAD      s2, $1F
  39  003  003ff                      LOAD      s3, $FF
  40  004  00402                      LOAD      s4, $02
  41  005  005a5                      LOAD      s5, $A5
  42              
  43  006  00658                      LOAD      s6, $58
  44              
  45  007  13010                      TEST      s0, s1
  46  008  35026                      JUMP      Z, test_ko
  47  009  35826                      JUMP      C, test_ko
  48              
  49  00a  13020                      TEST      s0, s2
  50  00b  35026                      JUMP      Z, test_ko
  51  00c  35c26                      JUMP      NC, test_ko
  52              
  53  00d  13030                      TEST      s0, s3
  54  00e  35026                      JUMP      Z, test_ko
  55  00f  35826                      JUMP      C, test_ko
  56              
  57  010  13040                      TEST      s0, s4
  58  011  35026                      JUMP      Z, test_ko
  59  012  35c26                      JUMP      NC, test_ko
  60              
  61  013  13050                      TEST      s0, s5
  62  014  35426                      JUMP      NZ, test_ko
  63  015  35826                      JUMP      C, test_ko
  64              
  65              
  66  016  13610                      TEST      s6, s1
  67  017  35026                      JUMP      Z, test_ko
  68  018  35c26                      JUMP      NC, test_ko
  69              
  70  019  13620                      TEST      s6, s2
  71  01a  35026                      JUMP      Z, test_ko
  72  01b  35826                      JUMP      C, test_ko
  73              
  74  01c  13630                      TEST      s6, s3
  75  01d  35026                      JUMP      Z, test_ko
  76  01e  35c26                      JUMP      NC, test_ko
  77              
  78  01f  13640                      TEST      s6, s4
  79  020  35426                      JUMP      NZ, test_ko
  80  021  35826                      JUMP      C, test_ko
  81              
  82  022  13650                      TEST      s6, s5
  83  023  35426                      JUMP      NZ, test_ko
  84  024  35826                      JUMP      C, test_ko
  85              
  86  025  343fc                      JUMP      test_ok
  87              
  88              ; ;------------------------------------
  89              ; ; Test ok/ko
  90              ; ;------------------------------------
  91              test_ko:
  92  026  00eed                      LOAD      sE, test_val_ko
  93  027  2cee0                      OUT       sE, debug_id
  94  028  34026                      JUMP      test_ko
  95              
  96                                  ORG       $3FC
  97              test_ok: 
  98                                  LOAD      sE, test_val_ok
  99                                  OUT       sE, debug_id
 100                                  JUMP      test_ok
 101              
 102              ; ;------------------------------------
 103              ; ; Interrupt VECTOR
 104              ; ;------------------------------------
 105                                  ORG       $3FF
 106                                  RETI      ENABLE
