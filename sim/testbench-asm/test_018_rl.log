
Picoblaze Assembler based on kpicosim  Version 1.0
Source File: /home/semai/Work/REPO_HOME/asylum/OpenBlaze8/tools/../sim/testbench-asm/test_018_rl.psm

Line  Addr Instr  Source Code
   1              ; ;------------------------------------
   2              ; ; Test 018
   3              ; ; Rotate left
   4              ; ;------------------------------------
   5              
   6              ; ;------------------------------------
   7              ; ; directive compilation fichier
   8              ; ;------------------------------------
   9              
  10              VHDL      "../ROM_blank_adh.vhd", "../../OpenBlaze8_ROM.vhd", "OpenBlaze8_ROM"
  11              
  12              ; ;------------------------------------
  13              ; ; Constantes
  14              ; ;------------------------------------
  15              sp                  EQU       sF
  16              
  17              test_val_ok         EQU       $FA
  18              test_val_ko         EQU       $ED
  19              
  20              ; ;------------------------------------
  21              ; ; directives pour le simulateur:  definition des  E/S
  22              ; ;------------------------------------
  23              switch_id           EQU       $00
  24              led_id              EQU       $20
  25              debug_id            EQU       $e0
  26              
  27              switch              DSIN      switch_id
  28              led                 DSOUT     led_id
  29              debug               DSOUT     debug_id
  30              
  31              ; ;------------------------------------
  32              ; ; MAIN
  33              ; ;------------------------------------
  34                                  ORG       $000
  35              main: 
  36  000  000a5                      LOAD      s0, $A5
  37  001  00100                      LOAD      s1, $00
  38              
  39              ; RL
  40  002  01900                      LOAD      s9, s0
  41              
  42  003  20902                      RL        s9                  ; 10100101 -> 01001011
  43  004  35c3b                      JUMP      NC, test_ko
  44  005  3503b                      JUMP      Z, test_ko
  45              
  46  006  1494b                      COMP      s9, $4B
  47  007  3583b                      JUMP      C, test_ko
  48  008  3543b                      JUMP      NZ, test_ko
  49              
  50  009  20902                      RL        s9                  ; 01001011 -> 10010110
  51  00a  3583b                      JUMP      C, test_ko
  52  00b  3503b                      JUMP      Z, test_ko
  53              
  54  00c  14996                      COMP      s9, $96
  55  00d  3583b                      JUMP      C, test_ko
  56  00e  3543b                      JUMP      NZ, test_ko
  57              
  58  00f  20902                      RL        s9                  ; 10010110 -> 00101101
  59  010  35c3b                      JUMP      NC, test_ko
  60  011  3503b                      JUMP      Z, test_ko
  61              
  62  012  1492d                      COMP      s9, $2D
  63  013  3583b                      JUMP      C, test_ko
  64  014  3543b                      JUMP      NZ, test_ko
  65              
  66  015  20902                      RL        s9                  ; 00101101 -> 01011010
  67  016  3583b                      JUMP      C, test_ko
  68  017  3503b                      JUMP      Z, test_ko
  69              
  70  018  1495a                      COMP      s9, $5A
  71  019  3583b                      JUMP      C, test_ko
  72  01a  3543b                      JUMP      NZ, test_ko
  73              
  74  01b  20902                      RL        s9                  ; 01011010 -> 10110100
  75  01c  3583b                      JUMP      C, test_ko
  76  01d  3503b                      JUMP      Z, test_ko
  77              
  78  01e  149b4                      COMP      s9, $B4
  79  01f  3583b                      JUMP      C, test_ko
  80  020  3543b                      JUMP      NZ, test_ko
  81              
  82  021  20902                      RL        s9                  ; 10110100 -> 01101001
  83  022  35c3b                      JUMP      NC, test_ko
  84  023  3503b                      JUMP      Z, test_ko
  85              
  86  024  14969                      COMP      s9, $69
  87  025  3583b                      JUMP      C, test_ko
  88  026  3543b                      JUMP      NZ, test_ko
  89              
  90  027  20902                      RL        s9                  ; 01101001 -> 11010010
  91  028  3583b                      JUMP      C, test_ko
  92  029  3503b                      JUMP      Z, test_ko
  93              
  94  02a  149d2                      COMP      s9, $D2
  95  02b  3583b                      JUMP      C, test_ko
  96  02c  3543b                      JUMP      NZ, test_ko
  97              
  98  02d  20902                      RL        s9                  ; 11010010 -> 10100101
  99  02e  35c3b                      JUMP      NC, test_ko
 100  02f  3503b                      JUMP      Z, test_ko
 101              
 102  030  149a5                      COMP      s9, $A5
 103  031  3583b                      JUMP      C, test_ko
 104  032  3543b                      JUMP      NZ, test_ko
 105              
 106  033  01910                      LOAD      s9, s1
 107  034  20902                      RL        s9                  ; 00000000 -> 00000000
 108  035  3583b                      JUMP      C, test_ko
 109  036  3543b                      JUMP      NZ, test_ko
 110              
 111  037  14900                      COMP      s9, $00
 112  038  3583b                      JUMP      C, test_ko
 113  039  3543b                      JUMP      NZ, test_ko
 114              
 115              
 116              
 117  03a  343fc                      JUMP      test_ok
 118              
 119              ; ;------------------------------------
 120              ; ; Test ok/ko
 121              ; ;------------------------------------
 122              test_ko:
 123  03b  00eed                      LOAD      sE, test_val_ko
 124  03c  2cee0                      OUT       sE, debug_id
 125  03d  3403b                      JUMP      test_ko
 126              
 127                                  ORG       $3FC
 128              test_ok: 
 129                                  LOAD      sE, test_val_ok
 130                                  OUT       sE, debug_id
 131                                  JUMP      test_ok
 132              
 133              ; ;------------------------------------
 134              ; ; Interrupt VECTOR
 135              ; ;------------------------------------
 136                                  ORG       $3FF
 137                                  RETI      ENABLE
