
Picoblaze Assembler based on kpicosim  Version 1.0
Source File: /home/semai/Work/REPO_HOME/asylum/OpenBlaze8/tools/../sim/testbench-asm/test_029_fetch_store.psm

Line  Addr Instr  Source Code
   1              ; ;------------------------------------
   2              ; ; Test 029
   3              ; ; fetch/store direct address
   4              ; ;------------------------------------
   5              
   6              ; ;------------------------------------
   7              ; ; directive compilation fichier
   8              ; ;------------------------------------
   9              
  10              VHDL      "../ROM_blank_adh.vhd", "../../OpenBlaze8_ROM.vhd", "OpenBlaze8_ROM"
  11              
  12              ; ;------------------------------------
  13              ; ; Constantes
  14              ; ;------------------------------------
  15              sp                  EQU       sF
  16              
  17              test_val_ok         EQU       $FA
  18              test_val_ko         EQU       $ED
  19              
  20              ; ;------------------------------------
  21              ; ; directives pour le simulateur:  definition des  E/S
  22              ; ;------------------------------------
  23              switch_id           EQU       $00
  24              led_id              EQU       $20
  25              debug_id            EQU       $e0
  26              
  27              switch              DSIN      switch_id
  28              led                 DSOUT     led_id
  29              debug               DSOUT     debug_id
  30              
  31              ; ;------------------------------------
  32              ; ; MAIN
  33              ; ;------------------------------------
  34                                  ORG       $000
  35              main: 
  36              
  37  000  00004                      LOAD      s0, $04
  38  001  2e000                      STORE     s0, $0
  39  002  00006                      LOAD      s0, $06
  40  003  2e001                      STORE     s0, $1
  41  004  00086                      LOAD      s0, $86
  42  005  2e002                      STORE     s0, $2
  43              
  44  006  00021                      LOAD      s0, $21
  45  007  2e061                      STORE     s0, $61
  46  008  00007                      LOAD      s0, $07
  47  009  2e062                      STORE     s0, $62
  48  00a  00081                      LOAD      s0, $81
  49  00b  2e063                      STORE     s0, $63
  50              
  51  00c  06000                      FETCH     s0, $0
  52  00d  14004                      COMP      s0, $04
  53  00e  3541f                      JUMP      NZ, test_ko
  54              
  55  00f  06001                      FETCH     s0, $1
  56  010  14006                      COMP      s0, $06
  57  011  3541f                      JUMP      NZ, test_ko
  58              
  59  012  06002                      FETCH     s0, $2
  60  013  14086                      COMP      s0, $86
  61  014  3541f                      JUMP      NZ, test_ko
  62              
  63  015  06061                      FETCH     s0, $61
  64  016  14021                      COMP      s0, $21
  65  017  3541f                      JUMP      NZ, test_ko
  66              
  67  018  06062                      FETCH     s0, $62
  68  019  14007                      COMP      s0, $07
  69  01a  3541f                      JUMP      NZ, test_ko
  70              
  71  01b  06063                      FETCH     s0, $63
  72  01c  14081                      COMP      s0, $81
  73  01d  3541f                      JUMP      NZ, test_ko
  74              
  75  01e  343fc                      JUMP      test_ok
  76              
  77              ; ;------------------------------------
  78              ; ; Test ok/ko
  79              ; ;------------------------------------
  80              test_ko:
  81  01f  00eed                      LOAD      sE, test_val_ko
  82  020  2cee0                      OUT       sE, debug_id
  83  021  3401f                      JUMP      test_ko
  84              
  85                                  ORG       $3FC
  86              test_ok: 
  87                                  LOAD      sE, test_val_ok
  88                                  OUT       sE, debug_id
  89                                  JUMP      test_ok
  90              
  91              ; ;------------------------------------
  92              ; ; Interrupt VECTOR
  93              ; ;------------------------------------
  94                                  ORG       $3FF
  95                                  RETI      ENABLE
