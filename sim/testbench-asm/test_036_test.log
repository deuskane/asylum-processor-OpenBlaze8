
Picoblaze Assembler based on kpicosim  Version 1.0
Source File: /home/semai/Work/REPO_HOME/asylum/OpenBlaze8/tools/../sim/testbench-asm/test_036_test.psm

Line  Addr Instr  Source Code
   1              ; ;------------------------------------
   2              ; ; Test 036
   3              ; ; Instruction Test with register
   4              ; ;------------------------------------
   5              
   6              ; ;------------------------------------
   7              ; ; directive compilation fichier
   8              ; ;------------------------------------
   9              
  10              VHDL      "../ROM_blank_adh.vhd", "../../OpenBlaze8_ROM.vhd", "OpenBlaze8_ROM"
  11              
  12              ; ;------------------------------------
  13              ; ; Constantes
  14              ; ;------------------------------------
  15              sp                  EQU       sF
  16              
  17              test_val_ok         EQU       $FA
  18              test_val_ko         EQU       $ED
  19              
  20              ; ;------------------------------------
  21              ; ; directives pour le simulateur:  definition des  E/S
  22              ; ;------------------------------------
  23              switch_id           EQU       $00
  24              led_id              EQU       $20
  25              debug_id            EQU       $e0
  26              
  27              switch              DSIN      switch_id
  28              led                 DSOUT     led_id
  29              debug               DSOUT     debug_id
  30              
  31              ; ;------------------------------------
  32              ; ; MAIN
  33              ; ;------------------------------------
  34                                  ORG       $000
  35              main: 
  36  000  0005a                      LOAD      s0, $5A
  37  001  00658                      LOAD      s6, $58
  38              
  39  002  1200f                      TEST      s0, $0F
  40  003  35021                      JUMP      Z, test_ko
  41  004  35821                      JUMP      C, test_ko
  42              
  43  005  1201f                      TEST      s0, $1F
  44  006  35021                      JUMP      Z, test_ko
  45  007  35c21                      JUMP      NC, test_ko
  46              
  47  008  120ff                      TEST      s0, $FF
  48  009  35021                      JUMP      Z, test_ko
  49  00a  35821                      JUMP      C, test_ko
  50              
  51  00b  12002                      TEST      s0, $02
  52  00c  35021                      JUMP      Z, test_ko
  53  00d  35c21                      JUMP      NC, test_ko
  54              
  55  00e  120a5                      TEST      s0, $A5
  56  00f  35421                      JUMP      NZ, test_ko
  57  010  35821                      JUMP      C, test_ko
  58              
  59              
  60  011  1260f                      TEST      s6, $0F
  61  012  35021                      JUMP      Z, test_ko
  62  013  35c21                      JUMP      NC, test_ko
  63              
  64  014  1261f                      TEST      s6, $1F
  65  015  35021                      JUMP      Z, test_ko
  66  016  35821                      JUMP      C, test_ko
  67              
  68  017  126ff                      TEST      s6, $FF
  69  018  35021                      JUMP      Z, test_ko
  70  019  35c21                      JUMP      NC, test_ko
  71              
  72  01a  12602                      TEST      s6, $02
  73  01b  35421                      JUMP      NZ, test_ko
  74  01c  35821                      JUMP      C, test_ko
  75              
  76  01d  126a5                      TEST      s6, $A5
  77  01e  35421                      JUMP      NZ, test_ko
  78  01f  35821                      JUMP      C, test_ko
  79              
  80  020  343fc                      JUMP      test_ok
  81              
  82              ; ;------------------------------------
  83              ; ; Test ok/ko
  84              ; ;------------------------------------
  85              test_ko:
  86  021  00eed                      LOAD      sE, test_val_ko
  87  022  2cee0                      OUT       sE, debug_id
  88  023  34021                      JUMP      test_ko
  89              
  90                                  ORG       $3FC
  91              test_ok: 
  92                                  LOAD      sE, test_val_ok
  93                                  OUT       sE, debug_id
  94                                  JUMP      test_ok
  95              
  96              ; ;------------------------------------
  97              ; ; Interrupt VECTOR
  98              ; ;------------------------------------
  99                                  ORG       $3FF
 100                                  RETI      ENABLE
