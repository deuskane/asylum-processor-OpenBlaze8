
Picoblaze Assembler based on kpicosim  Version 1.0
Source File: /home/semai/Work/REPO_HOME/asylum/OpenBlaze8/tools/../sim/testbench-asm/test_022_sla.psm

Line  Addr Instr  Source Code
   1              ; ;------------------------------------
   2              ; ; Test 022
   3              ; ; Shift left, carry fill
   4              ; ;------------------------------------
   5              
   6              ; ;------------------------------------
   7              ; ; directive compilation fichier
   8              ; ;------------------------------------
   9              
  10              VHDL      "../ROM_blank_adh.vhd", "../../OpenBlaze8_ROM.vhd", "OpenBlaze8_ROM"
  11              
  12              ; ;------------------------------------
  13              ; ; Constantes
  14              ; ;------------------------------------
  15              sp                  EQU       sF
  16              
  17              test_val_ok         EQU       $FA
  18              test_val_ko         EQU       $ED
  19              
  20              ; ;------------------------------------
  21              ; ; directives pour le simulateur:  definition des  E/S
  22              ; ;------------------------------------
  23              switch_id           EQU       $00
  24              led_id              EQU       $20
  25              debug_id            EQU       $e0
  26              
  27              switch              DSIN      switch_id
  28              led                 DSOUT     led_id
  29              debug               DSOUT     debug_id
  30              
  31              ; ;------------------------------------
  32              ; ; MAIN
  33              ; ;------------------------------------
  34                                  ORG       $000
  35              main: 
  36  000  000a5                      LOAD      s0, $A5
  37  001  00100                      LOAD      s1, $00
  38  002  00204                      LOAD      s2, $04
  39  003  00321                      LOAD      s3, $21
  40              ; sla
  41  004  01900                      LOAD      s9, s0
  42              
  43  005  15230                      COMP      s2, s3              ; carry set
  44  006  20900                      SLA       s9                  ; 10100101 -> 01001011
  45  007  35c4e                      JUMP      NC, test_ko
  46  008  3504e                      JUMP      Z, test_ko
  47              
  48  009  1494b                      COMP      s9, $4B
  49  00a  3584e                      JUMP      C, test_ko
  50  00b  3544e                      JUMP      NZ, test_ko
  51              
  52  00c  15320                      COMP      s3, s2              ; carry unset
  53  00d  20900                      SLA       s9                  ; 01001011 -> 10010110
  54  00e  3584e                      JUMP      C, test_ko
  55  00f  3504e                      JUMP      Z, test_ko
  56              
  57  010  14996                      COMP      s9, $96
  58  011  3584e                      JUMP      C, test_ko
  59  012  3544e                      JUMP      NZ, test_ko
  60              
  61  013  15230                      COMP      s2, s3              ; carry set
  62  014  20900                      SLA       s9                  ; 10010110 -> 00101101
  63  015  35c4e                      JUMP      NC, test_ko
  64  016  3504e                      JUMP      Z, test_ko
  65              
  66  017  1492d                      COMP      s9, $2D
  67  018  3584e                      JUMP      C, test_ko
  68  019  3544e                      JUMP      NZ, test_ko
  69              
  70  01a  15320                      COMP      s3, s2              ; carry unset
  71  01b  20900                      SLA       s9                  ; 00101101 -> 01011010
  72  01c  3584e                      JUMP      C, test_ko
  73  01d  3504e                      JUMP      Z, test_ko
  74              
  75  01e  1495a                      COMP      s9, $5A
  76  01f  3584e                      JUMP      C, test_ko
  77  020  3544e                      JUMP      NZ, test_ko
  78              
  79  021  15320                      COMP      s3, s2              ; carry unset
  80  022  20900                      SLA       s9                  ; 01011010 -> 10110100
  81  023  3584e                      JUMP      C, test_ko
  82  024  3504e                      JUMP      Z, test_ko
  83              
  84  025  149b4                      COMP      s9, $B4
  85  026  3584e                      JUMP      C, test_ko
  86  027  3544e                      JUMP      NZ, test_ko
  87              
  88  028  15230                      COMP      s2, s3              ; carry set
  89  029  20900                      SLA       s9                  ; 10110100 -> 01101001
  90  02a  35c4e                      JUMP      NC, test_ko
  91  02b  3504e                      JUMP      Z, test_ko
  92              
  93  02c  14969                      COMP      s9, $69
  94  02d  3584e                      JUMP      C, test_ko
  95  02e  3544e                      JUMP      NZ, test_ko
  96              
  97  02f  15320                      COMP      s3, s2              ; carry unset
  98  030  20900                      SLA       s9                  ; 01101001 -> 11010010
  99  031  3584e                      JUMP      C, test_ko
 100  032  3504e                      JUMP      Z, test_ko
 101              
 102  033  149d2                      COMP      s9, $D2
 103  034  3584e                      JUMP      C, test_ko
 104  035  3544e                      JUMP      NZ, test_ko
 105              
 106  036  15230                      COMP      s2, s3              ; carry set
 107  037  20900                      SLA       s9                  ; 11010010 -> 10100101
 108  038  35c4e                      JUMP      NC, test_ko
 109  039  3504e                      JUMP      Z, test_ko
 110              
 111  03a  149a5                      COMP      s9, $A5
 112  03b  3584e                      JUMP      C, test_ko
 113  03c  3544e                      JUMP      NZ, test_ko
 114              
 115  03d  01910                      LOAD      s9, s1
 116  03e  15320                      COMP      s3, s2              ; carry unset
 117  03f  20900                      SLA       s9                  ; 00000000 -> 00000000
 118  040  3584e                      JUMP      C, test_ko
 119  041  3544e                      JUMP      NZ, test_ko
 120              
 121  042  14900                      COMP      s9, $00
 122  043  3584e                      JUMP      C, test_ko
 123  044  3544e                      JUMP      NZ, test_ko
 124              
 125  045  01910                      LOAD      s9, s1
 126  046  15230                      COMP      s2, s3              ; carry set
 127  047  20900                      SLA       s9                  ; 00000000 -> 00000001
 128  048  3584e                      JUMP      C, test_ko
 129  049  3504e                      JUMP      Z, test_ko
 130              
 131  04a  14901                      COMP      s9, $01
 132  04b  3584e                      JUMP      C, test_ko
 133  04c  3544e                      JUMP      NZ, test_ko
 134              
 135  04d  343fc                      JUMP      test_ok
 136              
 137              ; ;------------------------------------
 138              ; ; Test ok/ko
 139              ; ;------------------------------------
 140              test_ko:
 141  04e  00eed                      LOAD      sE, test_val_ko
 142  04f  2cee0                      OUT       sE, debug_id
 143  050  3404e                      JUMP      test_ko
 144              
 145                                  ORG       $3FC
 146              test_ok: 
 147                                  LOAD      sE, test_val_ok
 148                                  OUT       sE, debug_id
 149                                  JUMP      test_ok
 150              
 151              ; ;------------------------------------
 152              ; ; Interrupt VECTOR
 153              ; ;------------------------------------
 154                                  ORG       $3FF
 155                                  RETI      ENABLE
