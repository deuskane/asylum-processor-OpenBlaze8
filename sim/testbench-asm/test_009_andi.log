
Picoblaze Assembler based on kpicosim  Version 1.0
Source File: /home/semai/Work/REPO_HOME/asylum/OpenBlaze8/tools/../sim/testbench-asm/test_009_andi.psm

Line  Addr Instr  Source Code
   1              ; ;------------------------------------
   2              ; ; Test 009
   3              ; ; Instruction AND (immediat)
   4              ; ; diff : flag z on res !
   5              ; ;------------------------------------
   6              
   7              ; ;------------------------------------
   8              ; ; directive compilation fichier
   9              ; ;------------------------------------
  10              
  11              VHDL      "../ROM_blank_adh.vhd", "../../OpenBlaze8_ROM.vhd", "OpenBlaze8_ROM"
  12              
  13              ; ;------------------------------------
  14              ; ; Constantes
  15              ; ;------------------------------------
  16              sp                  EQU       sF
  17              
  18              test_val_ok         EQU       $FA
  19              test_val_ko         EQU       $ED
  20              
  21              ; ;------------------------------------
  22              ; ; directives pour le simulateur:  definition des  E/S
  23              ; ;------------------------------------
  24              switch_id           EQU       $00
  25              led_id              EQU       $20
  26              debug_id            EQU       $e0
  27              
  28              switch              DSIN      switch_id
  29              led                 DSOUT     led_id
  30              debug               DSOUT     debug_id
  31              
  32              ; ;------------------------------------
  33              ; ; MAIN
  34              ; ;------------------------------------
  35                                  ORG       $000
  36              main: 
  37  000  000a5                      LOAD      s0, $A5
  38  001  001f0                      LOAD      s1, $F0
  39  002  0020f                      LOAD      s2, $0F
  40  003  003ff                      LOAD      s3, $FF
  41  004  0045a                      LOAD      s4, $5A
  42  005  00500                      LOAD      s5, $00
  43              
  44  006  01a00                      LOAD      sA, s0              ; sA <- $A5
  45  007  0aaf0                      AND       sA, $F0             ; sA <- sA & $F0 <- $A0
  46              
  47  008  35c0a                      JUMP      NC, test01_ok
  48  009  3403d                      JUMP      test_ko
  49              test01_ok: 
  50  00a  3540c                      JUMP      NZ, test02_ok
  51  00b  3403d                      JUMP      test_ko
  52              test02_ok: 
  53  00c  14aa0                      COMP      sA, $A0
  54  00d  3500f                      JUMP      Z, test03_ok
  55  00e  3403d                      JUMP      test_ko
  56              test03_ok: 
  57              
  58  00f  01a00                      LOAD      sA, s0              ; sA <- $A5
  59  010  0aa0f                      AND       sA, $0F             ; sA <- sA & $0F <- $05
  60              
  61  011  35c13                      JUMP      NC, test11_ok
  62  012  3403d                      JUMP      test_ko
  63              test11_ok: 
  64  013  35415                      JUMP      NZ, test12_ok
  65  014  3403d                      JUMP      test_ko
  66              test12_ok: 
  67  015  14a05                      COMP      sA, $05
  68  016  35018                      JUMP      Z, test13_ok
  69  017  3403d                      JUMP      test_ko
  70              test13_ok: 
  71              
  72  018  01a00                      LOAD      sA, s0              ; sA <- $A5
  73  019  0aaff                      AND       sA, $FF             ; sA <- sA & $FF <- $A5
  74              
  75  01a  35c1c                      JUMP      NC, test21_ok
  76  01b  3403d                      JUMP      test_ko
  77              test21_ok: 
  78  01c  3541e                      JUMP      NZ, test22_ok
  79  01d  3403d                      JUMP      test_ko
  80              test22_ok: 
  81  01e  14aa5                      COMP      sA, $A5
  82  01f  35021                      JUMP      Z, test23_ok
  83  020  3403d                      JUMP      test_ko
  84              test23_ok: 
  85              
  86  021  01a00                      LOAD      sA, s0              ; sA <- $A5
  87  022  0aa5a                      AND       sA, $5A             ; sA <- sA & $5A <- $00
  88              
  89  023  35c25                      JUMP      NC, test31_ok
  90  024  3403d                      JUMP      test_ko
  91              test31_ok: 
  92  025  35027                      JUMP      Z, test32_ok
  93  026  3403d                      JUMP      test_ko
  94              test32_ok: 
  95  027  14a00                      COMP      sA, $00
  96  028  3502a                      JUMP      Z, test33_ok
  97  029  3403d                      JUMP      test_ko
  98              test33_ok: 
  99              
 100  02a  01a00                      LOAD      sA, s0              ; sA <- $A5
 101  02b  0aa00                      AND       sA, $00             ; sA <- sA & $00 <- $00
 102              
 103  02c  35c2e                      JUMP      NC, test41_ok
 104  02d  3403d                      JUMP      test_ko
 105              test41_ok: 
 106  02e  35030                      JUMP      Z, test42_ok
 107  02f  3403d                      JUMP      test_ko
 108              test42_ok: 
 109  030  14a00                      COMP      sA, $00
 110  031  35033                      JUMP      Z, test43_ok
 111  032  3403d                      JUMP      test_ko
 112              test43_ok: 
 113              
 114  033  01a50                      LOAD      sA, s5              ; sA <- $00
 115  034  0aaa5                      AND       sA, $A5             ; sA <- sA & $A5 <- $00
 116              
 117  035  35c37                      JUMP      NC, test51_ok
 118  036  3403d                      JUMP      test_ko
 119              test51_ok: 
 120  037  35039                      JUMP      Z, test52_ok
 121  038  3403d                      JUMP      test_ko
 122              test52_ok: 
 123  039  14a00                      COMP      sA, $00
 124  03a  3503c                      JUMP      Z, test53_ok
 125  03b  3403d                      JUMP      test_ko
 126              test53_ok: 
 127  03c  343fc                      JUMP      test_ok
 128              
 129              ; ;------------------------------------
 130              ; ; Test ok/ko
 131              ; ;------------------------------------
 132              test_ko:
 133  03d  00eed                      LOAD      sE, test_val_ko
 134  03e  2cee0                      OUT       sE, debug_id
 135  03f  3403d                      JUMP      test_ko
 136              
 137                                  ORG       $3FC
 138              test_ok: 
 139                                  LOAD      sE, test_val_ok
 140                                  OUT       sE, debug_id
 141                                  JUMP      test_ok
 142              
 143              ; ;------------------------------------
 144              ; ; Interrupt VECTOR
 145              ; ;------------------------------------
 146                                  ORG       $3FF
 147                                  RETI      ENABLE
